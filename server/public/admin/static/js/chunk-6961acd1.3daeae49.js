(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6961acd1"],{"3a78":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.handleAdd}},[t._v("添加 ")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.filter((function(e){return!t.search||e.title.toLowerCase().includes(t.search.toLowerCase())}))}},[o("el-table-column",{attrs:{label:"id",prop:"id"}}),o("el-table-column",{attrs:{label:"标题",prop:"title"}}),o("el-table-column",{attrs:{label:"发布时间",prop:"date"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("i",{staticClass:"el-icon-time"}),o("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),o("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索[标题]"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1),o("el-dialog",{attrs:{title:t.isCreate?"新建文章":"编辑文章",visible:t.dialogFormVisible,fullscreen:"","before-close":t.beforeClose},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"myForm",attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"正文","label-width":t.formLabelWidth,prop:"password"}},[[o("editor",{attrs:{content:t.form.content},on:{"update:content":function(e){return t.$set(t.form,"content",e)}}})]],2)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},i=[],a=o("dac0"),s=o("b775");function l(){return Object(s["a"])({url:"/guides",method:"get"})}function r(t){return Object(s["a"])({url:"/guides",method:"post",data:t})}function c(t){return Object(s["a"])({url:"/guides/"+t.id,method:"put",data:t})}function u(t){return Object(s["a"])({url:"/guides/"+t,method:"delete"})}var d={name:"Users",components:{Editor:a["a"]},data:function(){return{loading:!1,isCreate:!0,formLabelWidth:"120px",dialogFormVisible:!1,temp:{title:"",date:(new Date).toLocaleString(),content:""},form:{},search:"",list:[]}},computed:{BASE_API:function(){return""},RESOURCE_API:function(){return""}},mounted:function(){this.form=this.temp,this.getList()},methods:{beforeClose:function(){this.form=this.temp,this.dialogFormVisible=!1},handleSave:function(){var t=this;if(this.loading=!0,this.isCreate){var e=Object.assign({},this.form);delete e.id,r(e).then((function(e){console.log(e),t.loading=!1,t.$message.success("保存成功."),t.dialogFormVisible=!1,t.getList()})).catch((function(e){t.loading=!1,console.log(e),t.$message.error("保存失败.")}))}else c(this.form).then((function(e){console.log(e),t.loading=!1,t.$message.success("保存成功."),t.dialogFormVisible=!1,t.getList()})).catch((function(e){t.loading=!1,console.log(e),t.$message.error("保存失败.")}))},handleAdd:function(){this.isCreate=!0,this.dialogFormVisible=!0},handleEdit:function(t,e){this.isCreate=!1,this.form=Object.assign({},e),this.dialogFormVisible=!0},handleDelete:function(t,e){var o=this;u(e.id).then((function(t){o.$message.success(t.message),console.log(t),o.getList()})).catch((function(t){console.log(t),o.$message.error("删除失败.")}))},getList:function(){var t=this;l().then((function(e){t.list=e})).catch((function(e){console.log(e),t.$message.error("获取用户列表失败.")}))},handleAvatarSuccess:function(t,e){this.form.avatar=t},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,o=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&o}}},f=d,m=(o("9cd2"),o("2877")),h=Object(m["a"])(f,n,i,!1,null,"4c2a81da",null);e["default"]=h.exports},6089:function(t,e,o){},"67c2":function(t,e,o){"use strict";o("6089")},"8f5a":function(t,e,o){},"9cd2":function(t,e,o){"use strict";o("8f5a")},dac0:function(t,e,o){"use strict";var n,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ArticleDetail"},[o("el-upload",{staticClass:"upload-demo",attrs:{action:t.BASE_API+"/storage/image",name:"image","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"list-type":"picture"},scopedSlots:t._u([{key:"file",fn:function(e){var n=e.file;return o("div",{},[o("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),o("a",{staticClass:"el-upload-list__item-name"},[o("i",{staticClass:"el-icon-document"}),o("small",[t._v("图片地址：")]),o("span",{staticClass:"el-icon-document-copy",attrs:{title:"单击或者双击复制内容"},on:{click:t.copy,dblclick:t.copy}},[t._v(t._s(t.RESOURCE_API)+t._s(n.response))])])])}}])},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")])],1),o("div",{ref:"editor",staticClass:"editor",staticStyle:{"text-align":"left"}})],1)},a=[],s=o("6fad"),l=o.n(s),r={name:"Edit",props:{content:String},data:function(){return{Title:"",fileList:[]}},computed:{BASE_API:function(){return""},RESOURCE_API:function(){return""}},mounted:function(){var t=this;n=new l.a(this.$refs.editor),n.config.height="auto",n.customConfig={onchange:function(t){}},n.create(),n.txt.html(this.content),n.config.onchange=function(e){t.$emit("update:content",e)},n.config.onchangeTimeout=500},methods:{handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},copy:function(t){var e=t.srcElement.innerText,o=document.createElement("textarea");o.setAttribute("readonly","readonly"),o.value=e,document.body.appendChild(o),o.select();var n=document.execCommand("copy");document.body.removeChild(o),this.$message.success("复制成功"),console.log("复制成功"),console.log(n)}}},c=r,u=(o("67c2"),o("2877")),d=Object(u["a"])(c,i,a,!1,null,"7e75d5a8",null);e["a"]=d.exports}}]);