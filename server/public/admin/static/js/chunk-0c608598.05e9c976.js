(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c608598"],{1140:function(e,t,s){},"3b65":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list.filter((function(t){return!e.search||t.uname.toLowerCase().includes(e.search.toLowerCase())}))}},[s("el-table-column",{attrs:{label:"id",prop:"id"}}),s("el-table-column",{attrs:{label:"用户名",prop:"nickname"}}),s("el-table-column",{attrs:{label:"竞赛名称",prop:"competition_title"}}),s("el-table-column",{attrs:{label:"时间",prop:"date"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),s("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:e.showTagType(t.row.status)}},[e._v(e._s(e.showTagStatusName(t.row.status)))])]}}])}),s("el-table-column",{attrs:{label:"报名表",prop:"form"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(s){return e.handleAudit(t.row)}}},[e._v("审核")])]}}])}),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索[用户名]"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),s("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"竞赛名称："+e.activeAttend.competition_title},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-descriptions",{attrs:{title:"报名信息"}},[s("template",{slot:"extra"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handlePass}},[e._v("通过")]),s("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleRefuse}},[e._v("拒绝")])],1),s("el-descriptions-item",{attrs:{label:"用户名"}},[e._v(e._s(e.formCache.nickname))]),s("el-descriptions-item",{attrs:{label:"姓名"}},[e._v(e._s(e.formCache.name))]),s("el-descriptions-item",{attrs:{label:"手机号"}},[e._v(e._s(e.formCache.phone))]),s("el-descriptions-item",{attrs:{label:"邮箱"}},[e._v(e._s(e.formCache.email))]),s("el-descriptions-item",{attrs:{label:"学历"}},[e._v(e._s(e.formCache.xueli))]),s("el-descriptions-item",{attrs:{label:"学校"}},[e._v(e._s(e.formCache.school))]),s("el-descriptions-item",{attrs:{label:"联系地址"}},[e._v(e._s(e.formCache.address))])],2)],1)],1)},i=[],n=s("b775");function o(){return Object(n["a"])({url:"/attend",method:"get"})}function l(e){return Object(n["a"])({url:"/attend",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/attend/"+e.id,method:"put",data:e})}function c(e){return Object(n["a"])({url:"/attend/"+e,method:"delete"})}var u={name:"Attend",data:function(){return{formCache:{competition:"某某竞赛",uname:"大露露",name:"小露露",phone:"15777850920",email:"1486073356@qq.com",xueli:"本科",school:"广西大学",address:"很长很长很长的地址"},activeAttend:{},loading:!1,isCreate:!0,formLabelWidth:"120px",dialogFormVisible:!1,search:"",list:[]}},mounted:function(){this.getList()},methods:{handleAudit:function(e){this.dialogFormVisible=!0,this.activeAttend=e,this.formCache=JSON.parse(e.form)},handlePass:function(){this.activeAttend.status="pass",this.update(this.activeAttend)},handleRefuse:function(){this.activeAttend.status="refuse",this.update(this.activeAttend)},showTagStatusName:function(e){var t="";switch(e){case"pass":t="报名成功";break;case"commit":t="新建提交";break;case"refuse":t="审核未通过";break}return t},showTagType:function(e){var t="";switch(e){case"pass":t="success";break;case"refuse":t="danger";break;case"commit":t="";break}return t},beforeClose:function(){this.form={address:"",avatar:"",email:"",id:"",motto:"",name:"",password:"",phone:""},this.dialogFormVisible=!1},update:function(e){var t=this;r(e).then((function(e){console.log(e),t.loading=!1,t.$message.success("保存成功."),t.dialogFormVisible=!1,t.getList()})).catch((function(e){t.loading=!1,console.log(e),t.$message.error("保存失败.")}))},handleSave:function(){var e=this;if(this.loading=!0,this.isCreate){var t=Object.assign({},this.form);delete t.id,l(t).then((function(t){console.log(t),e.loading=!1,e.$message.success("保存成功."),e.dialogFormVisible=!1,e.getList()})).catch((function(t){e.loading=!1,console.log(t),e.$message.error("保存失败.")}))}else r(this.form).then((function(t){console.log(t),e.loading=!1,e.$message.success("保存成功."),e.dialogFormVisible=!1,e.getList()})).catch((function(t){e.loading=!1,console.log(t),e.$message.error("保存失败.")}))},handleAdd:function(){this.isCreate=!0,this.dialogFormVisible=!0},handleEdit:function(e,t){this.isCreate=!1,this.form=Object.assign({},t),this.dialogFormVisible=!0},handleDelete:function(e,t){var s=this;c(t.id).then((function(e){s.$message.success(e.message),console.log(e),s.getList()})).catch((function(e){console.log(e),s.$message.error("删除失败.")}))},getList:function(){var e=this;o().then((function(t){e.list=t})).catch((function(t){console.log(t),e.$message.error("获取用户列表失败.")}))}}},d=u,m=(s("6214"),s("2877")),h=Object(m["a"])(d,a,i,!1,null,"775f232e",null);t["default"]=h.exports},6214:function(e,t,s){"use strict";s("1140")}}]);